<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.busniess.dao.FinancingDao">
    <sql id="business_sql">
        <if test="uName!=null and  uName!=''">
            `uName`=#{uName}
        </if>
        <if test="statue!=null and  statue!=''">
            `statue`=#{statue}
        </if>
        <if test="industry!=null and industry!=''">
            AND instr('${industry}',`industry`)
        </if>
        <if test="income!=null and income!=''">
            AND `income` between #{less} and #{greater}
        </if>
        <if test="period!=null and period!=''">
            AND `period` between #{pless} and #{pgreat}
        </if>
        <if test="province!=null and province!=''">
            AND `province`=#{province}
        </if>
        <if test="city!=null and city!=''">
            AND `city`=#{city}
        </if>
        <if test="discribe!=null and discribe!=''">
            AND `discribe`=#{discribe}
        </if>
        <if test="projecrPhase!=null and projecrPhase!=''">
            AND instr('${projecrPhase}',`projecrPhase`)
        </if>
        <if test="financing!=null and financing!=''">
            AND instr('${financing}',`financing`)
        </if>
        <if test="projectName!=null and projectName!=''">
            AND `projectName` like "%${projectName}%"
        </if>

    </sql>
    <select id="selectAllFinancing" parameterType="financingEntity" resultType="financingEntity">
        SELECT id,companyName,projectName,industry,financing,income,projecrphase,period,projectFinancing,statue,insertTime FROM financing
        <where>
            <include refid="business_sql"></include>

        </where>
        ORDER BY `insertTime` DESC
    </select>


</mapper>